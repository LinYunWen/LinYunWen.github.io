<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/linyunwen_icon/icon_32x32.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/linyunwen_icon/icon_32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/linyunwen_icon/icon_16x16.png">
  <link rel="mask-icon" href="/images/linyunwen_icon/icon_32x32.png" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"linyunwen.github.io","root":"/","images":"/images","scheme":"Gemini","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜尋...","empty":"我們無法找到任何有關 ${query} 的搜索結果","hits_time":"${hits} 找到 ${time} 個結果","hits":"找到 ${hits} 個結果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="MOTD (Message of the day) static &#x2F;etc&#x2F;motd Then, Ubuntu Intrepid Ibex (2008) introduced a package update-motd, which consisted of   a script called update-motd.   an entry in &#x2F;etc&#x2F;cron.d calling updat">
<meta property="og:type" content="article">
<meta property="og:title" content="motd">
<meta property="og:url" content="https://linyunwen.github.io/2021/08/12/motd/index.html">
<meta property="og:site_name" content="Lin Yunwen&#39;s Blog">
<meta property="og:description" content="MOTD (Message of the day) static &#x2F;etc&#x2F;motd Then, Ubuntu Intrepid Ibex (2008) introduced a package update-motd, which consisted of   a script called update-motd.   an entry in &#x2F;etc&#x2F;cron.d calling updat">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2021-08-12T12:59:48.000Z">
<meta property="article:modified_time" content="2021-08-12T13:01:05.132Z">
<meta property="article:author" content="Lin Yunwen">
<meta property="article:tag" content="note, linux, motd">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://linyunwen.github.io/2021/08/12/motd/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-TW","comments":true,"permalink":"https://linyunwen.github.io/2021/08/12/motd/","path":"2021/08/12/motd/","title":"motd"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>motd | Lin Yunwen's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-H43D6184CW"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-H43D6184CW","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Lin Yunwen's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">keep moving forward</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MOTD-Message-of-the-day"><span class="nav-number">1.</span> <span class="nav-text">MOTD (Message of the day)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#files"><span class="nav-number">1.1.</span> <span class="nav-text">files</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#how-to-do"><span class="nav-number">1.2.</span> <span class="nav-text">how to do</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#landscape-sysinfo"><span class="nav-number">1.3.</span> <span class="nav-text">landscape-sysinfo</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#run-parts"><span class="nav-number">1.4.</span> <span class="nav-text">run-parts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reference"><span class="nav-number">1.5.</span> <span class="nav-text">reference</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Lin Yunwen"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Lin Yunwen</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">103</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">124</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/LinYunWen" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;LinYunWen" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:l40303k@gmail.com" title="E-Mail → mailto:l40303k@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="回到頂端">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://linyunwen.github.io/2021/08/12/motd/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Lin Yunwen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lin Yunwen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          motd
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>
      

      <time title="創建時間：2021-08-12 20:59:48 / 修改時間：21:01:05" itemprop="dateCreated datePublished" datetime="2021-08-12T20:59:48+08:00">2021-08-12</time>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>2.6k</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>5 分鐘</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="MOTD-Message-of-the-day"><a href="#MOTD-Message-of-the-day" class="headerlink" title="MOTD (Message of the day)"></a>MOTD (Message of the day)</h1><ul>
<li>static <code>/etc/motd</code></li>
<li>Then, Ubuntu Intrepid Ibex (2008) introduced a package <em>update-motd</em>, which consisted of<ul>
<li>  a script called <em>update-motd.</em></li>
<li>  an entry in <em>/etc/cron.d</em> calling <em>update-motd</em> every 10 minutes.</li>
<li>  a folder <em>/etc/update-motd.d</em><span id="more"></span></li>
</ul>
</li>
<li>The script runs all the scripts in <em>/etc/update-motd.d</em> using <a target="_blank" rel="noopener" href="http://manpages.ubuntu.com/manpages/trusty/man8/run-parts.8.html"><em>run-parts</em></a>, then stores all output in <em>/var/run/motd</em>.<blockquote>
<ul>
<li>For this reason, even in Debian if we create the folder <em>/etc/update-motd.d</em>, which does not exist by default, it will be run <em>at every login</em> in the same way as if we had Ubuntu’s <em>update-motd</em> package installed.</li>
</ul>
</blockquote>
</li>
</ul>
<h2 id="files"><a href="#files" class="headerlink" title="files"></a>files</h2><ul>
<li>  <code>/etc/motd</code> – The classic, static file. Does not exist anymore in Ubuntu 16.04 LTS, not even as a symbolic link to <code>/var/run/motd</code>. If it is created, however its contents will be printed too.</li>
<li>  <code>/var/run/motd</code> – This was used by Ubuntu’s first implementation. It is not used anymore. It is just ignored by PAM.</li>
<li>  <code>/var/run/motd.dynamic</code> – <strong>This is what is shown on login currently</strong>. It is updated by <code>/etc/init.d/motd</code> at every boot. It is also updated by PAM by running the scripts in <code>/etc/update-motd.d/</code>, if they exist.</li>
<li>  <code>/etc/motd.tail</code> – The Ubuntu package <code>used to</code> populate <code>/etc/update-motd.d.</code> One of them would cat the contents of this file so it was easy to add static content. That script does not exist in the package anymore, so the file does not have the intended effect.</li>
</ul>
<h2 id="how-to-do"><a href="#how-to-do" class="headerlink" title="how to do"></a>how to do</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /etc/update-motd.d</span><br><span class="line">rm -f /etc/motd</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// in /etc/pam.d/sshd</span><br><span class="line">session    optional     pam_motd.so motd=/run/motd</span><br><span class="line">session    optional     pam_motd.so noupdate</span><br></pre></td></tr></table></figure>



<h2 id="landscape-sysinfo"><a href="#landscape-sysinfo" class="headerlink" title="landscape-sysinfo"></a>landscape-sysinfo</h2><blockquote>
<ul>
<li>/usr/lib/python3/dist-packages/landscape</li>
</ul>
</blockquote>
<ul>
<li>Display a summary of the current system status</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">--version</span><br><span class="line">       show program&#x27;s version number and exit</span><br><span class="line"></span><br><span class="line">-h, --help</span><br><span class="line">       show this help message and exit</span><br><span class="line"></span><br><span class="line">-c FILE, --config=FILE</span><br><span class="line">       Use config from this file (any command line  options  override  settings  from  the</span><br><span class="line">       file) (default: &#x27;/etc/landscape/client.conf&#x27;).</span><br><span class="line"></span><br><span class="line">-d PATH, --data-path=PATH</span><br><span class="line">       The directory to store data files in (default: &#x27;/var/lib/landscape/client/&#x27;).</span><br><span class="line"></span><br><span class="line">--sysinfo-plugins=PLUGIN_LIST</span><br><span class="line">       Comma-delimited list of sysinfo plugins to use.  Default is to use all plugins.</span><br><span class="line"></span><br><span class="line">--exclude-sysinfo-plugins=PLUGIN_LIST</span><br><span class="line">       Comma-delimited  list  of  sysinfo plugins to NOT use.  This always take precedence</span><br><span class="line">       over plugins to include.</span><br><span class="line"></span><br><span class="line">Available  plugins:   Load,   Disk,   Memory,   Temperature,   Processes,   LoggedInUsers,</span><br><span class="line">LandscapeLink, Network</span><br><span class="line"></span><br><span class="line">Default plugins: Load, Disk, Memory, Temperature, Processes, LoggedInUsers, Network</span><br></pre></td></tr></table></figure>
<h2 id="run-parts"><a href="#run-parts" class="headerlink" title="run-parts"></a>run-parts</h2><ul>
<li>照字母排序執行該資料夾下所有可執行文件</li>
</ul>
<h2 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://blog.kavinyao.com/posts/ubuntu-motd-temp/">Temperature in Ubuntu MOTD</a></li>
<li><a target="_blank" rel="noopener" href="https://askubuntu.com/questions/638568/colorize-landscape-sysinfo">bash - Colorize landscape-sysinfo - Ask Ubuntu</a></li>
<li><a target="_blank" rel="noopener" href="https://ownyourbits.com/2017/04/05/customize-your-motd-login-message-in-debian-and-ubuntu/">Customize your MOTD login message in Debian and Ubuntu – Own your bits</a></li>
<li><a target="_blank" rel="noopener" href="https://serverfault.com/questions/407033/how-can-i-edit-the-welcome-message-when-ssh-start">ubuntu - How can I edit the welcome message when ssh start? - Server Fault</a></li>
<li><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/246436/how-to-set-a-dynamic-message-of-the-day-motd-in-debian-jessie-8-2-for-ssh">How to set a dynamic Message of the Day (motd) in Debian Jessie 8.2 for ssh? - Unix &amp; Linux Stack Exchange</a></li>
<li><a target="_blank" rel="noopener" href="http://manpages.ubuntu.com/manpages/bionic/man1/landscape-sysinfo.1.html">Ubuntu Manpage: landscape-sysinfo - Display a summary of the current system status</a></li>
<li><a target="_blank" rel="noopener" href="http://manpages.ubuntu.com/manpages/trusty/man5/update-motd.5.html">Ubuntu Manpage: update-motd - dynamic MOTD generation</a></li>
<li><a target="_blank" rel="noopener" href="http://manpages.ubuntu.com/manpages/trusty/man8/pam_motd.8.html">Ubuntu Manpage: pam_motd - Display the motd file</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/note-linux-motd/" rel="tag"># note, linux, motd</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/08/11/logrotate/" rel="prev" title="logrotate">
                  <i class="fa fa-chevron-left"></i> logrotate
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/08/15/pam/" rel="next" title="pam">
                  pam <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lin Yunwen</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>總字數：</span>
    <span title="總字數">246k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>所需總閱讀時間 &asymp;</span>
    <span title="所需總閱讀時間">7:28</span>
  </span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
